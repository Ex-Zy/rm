import{a as h,r as V,x as N,a1 as $,o as p,l as y,f as o,a2 as R,p as S,u as t,c as g,w as i,b as k,F as w,I as T,e as x,t as E,h as U,C as j,a3 as D,K as F,at as Y,k as C,m as G}from"./entry.aecc05ba.mjs";import{_ as K}from"./_plugin-vue_export-helper.7287ed4b.mjs";import{v as M,E as z,g as A,a as I,b as L}from"./directive.854da397.mjs";import{E as f,a as O,b as Q,c as H}from"./index.8afe85cf.mjs";import{c as J}from"./index.1376522b.mjs";import"./index.40b80f96.mjs";const W={class:"filter-bar"},X=h({__name:"FilterBarEpisodes",props:{filter:null},emits:["update:filter"],setup(n,{emit:l}){const u=n,s=V({name:"",episode:""});N(()=>({...u.filter}),r=>Object.keys(r).length?s.value=r:null,{immediate:!0});const c=()=>l("update:filter",{...s.value});return(r,d)=>{const e=$("FormKit");return p(),y("div",W,[o(e,{modelValue:s.value.name,"onUpdate:modelValue":d[0]||(d[0]=a=>s.value.name=a),label:"Name",placeholder:"Rick Sanchez",name:"name"},null,8,["modelValue"]),o(e,{modelValue:s.value.episode,"onUpdate:modelValue":d[1]||(d[1]=a=>s.value.episode=a),label:"Episode",placeholder:"S01E02",name:"episode"},null,8,["modelValue"]),o(e,{type:"button",label:"Search",onClick:c})])}}}),Z=K(X,[["__scopeId","data-v-8980a5bf"]]),q={style:{padding:"10px"}},ee=k("h3",{style:{margin:"0"}},"Characters",-1),te=h({__name:"GridEpisodes",props:{page:null,loading:{type:Boolean},totalRows:null,episodes:null},emits:["update:page"],setup(n,{emit:l}){const u=n,s=V(1);R(()=>s.value=u.page);const m=c=>l("update:page",c);return(c,r)=>{const d=D;return p(),y(w,null,[S((p(),g(t(Q),{data:n.episodes,style:{width:"100%","flex-grow":"1","margin-bottom":"15px",height:"100px"},stripe:"",border:""},{default:i(()=>[o(t(f),{type:"expand"},{default:i(({row:e})=>[k("div",q,[ee,(p(!0),y(w,null,T(e.characters,a=>(p(),g(t(J),{key:a.id,placement:"top-end",content:a.status,effect:"dark"},{default:i(()=>[o(t(z),{type:t(A)(a.status),effect:"dark",style:{margin:"10px 10px 0 0"}},{default:i(()=>[x(E(a.name),1)]),_:2},1032,["type"])]),_:2},1032,["content"]))),128))])]),_:1}),o(t(f),{prop:"id",label:"id",width:"50"}),o(t(f),{prop:"name",label:"Name",width:"300"},{default:i(({row:e})=>[o(d,{to:`/episodes/${e.id}`,style:{"text-decoration":"none"}},{default:i(()=>[o(t(O),{type:"primary"},{default:i(()=>[x(E(e.name),1)]),_:2},1024)]),_:2},1032,["to"])]),_:1}),o(t(f),{prop:"air_date",label:"Air date",width:"200",sortable:""}),o(t(f),{prop:"episode",label:"Episode",width:"150",sortable:""}),o(t(f),{prop:"created",label:"Created",sortable:""},{default:i(({row:e})=>[x(E(t(U)(e.created).format("MM/DD/YYYY")),1)]),_:1})]),_:1},8,["data"])),[[t(M),n.loading]]),n.episodes.length?(p(),g(t(H),{key:0,currentPage:s.value,"onUpdate:currentPage":r[0]||(r[0]=e=>s.value=e),style:{"margin-top":"auto","justify-content":"center","flex-shrink":"0"},"page-size":20,background:!0,layout:"total, prev, pager, next, jumper",total:n.totalRows,onCurrentChange:m},null,8,["currentPage","total"])):j("",!0)],64)}}}),ae=n=>{const l=F({...n,...n.filter&&{filter:{...n.filter}}}),{result:u,loading:s,error:m}=Y(l),c=C(()=>{var e,a;return(a=(e=u.value)==null?void 0:e.episodes.results)!=null?a:[]}),r=C(()=>{var e;return((e=u.value)==null?void 0:e.episodes.info.count)||0});return{episodes:c,loading:s,error:m,totalRows:r,updateEpisodesList:e=>{e.page&&(l.page=e.page),e.filter&&(l.filter=e.filter)}}},oe={class:"page-wrapper"},le=k("h2",{style:{"text-align":"center"}},"List of Rick and Morty episodes",-1),ue=h({__name:"index",setup(n){const l=F({page:1,filter:{name:"",episode:""}}),{episodes:u,loading:s,error:m,totalRows:c,updateEpisodesList:r}=ae(l),d=a=>{l.page=a.page,l.filter=a.filter},e=a=>{d(a),r(a)};return(a,_)=>{const P=Z,v=G,B=te;return p(),y("div",oe,[o(v,null,{fallback:i(()=>[o(t(L),{rows:1,animated:""})]),default:i(()=>[o(P,{filter:l.filter,"onUpdate:filter":_[0]||(_[0]=b=>e({filter:b,page:1}))},null,8,["filter"])]),_:1}),le,t(m)?(p(),g(t(I),{key:0,title:t(m).message,type:"error",effect:"dark","show-icon":""},null,8,["title"])):(p(),g(v,{key:1},{fallback:i(()=>[o(t(L),{rows:12,animated:""})]),default:i(()=>[o(B,{page:l.page,loading:t(s),episodes:t(u),"total-rows":t(c),"onUpdate:page":_[1]||(_[1]=b=>e({page:b,filter:{...l.filter}}))},null,8,["page","loading","episodes","total-rows"])]),_:1}))])}}});export{ue as default};
